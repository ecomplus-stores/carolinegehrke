(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{172:function(t,s,e){"use strict";var i=e(28),r=e(43),a=e(44),o=e(45),n=e(80);const c=(t,s)=>{const{type:e,value:i}=s;if(i)return"percentage"===e?t*(100-i)/100:t-i};var l={name:"APrices",props:{product:{type:Object,required:!0},isLiteral:Boolean,isBig:Boolean,isAmountTotal:Boolean,installmentsOption:Object,discountOption:Object,discountText:{type:[String,Boolean],default:""}},data(){return{installmentsNumber:0,monthlyInterest:0,discount:{type:null,value:0},extraDiscount:{type:null,value:0},discountLabel:this.discountText}},computed:{i19asOf:()=>Object(r.a)(i.o),i19from:()=>Object(r.a)(i.xb),i19interestFree:()=>Object(r.a)(i.Kb),i19of:()=>Object(r.a)(i.sc),i19to:()=>Object(r.a)(i.Hd),i19upTo:()=>Object(r.a)(i.Qd),price(){const t=Object(a.a)(this.product);return this.extraDiscount.value?c(t,this.extraDiscount):t},comparePrice(){return Object(o.a)(this.product)?this.product.base_price:this.extraDiscount.value?Object(a.a)(this.product):void 0},hasVariedPrices(){const{variations:t}=this.product;if(t){const s=Object(a.a)(this.product);for(let e=0;e<t.length;e++){if(Object(a.a)({...this.product,...t[e]})>s)return!0}}return!1},priceWithDiscount(){return c(this.price,this.discount)},installmentValue(){if(this.installmentsNumber>=2){if(this.monthlyInterest){const t=this.monthlyInterest/100;return this.price*t/(1-Math.pow(1+t,-this.installmentsNumber))}return this.price/this.installmentsNumber}return 0}},methods:{formatMoney:n.a,updateInstallments(t){if(t){this.monthlyInterest=t.monthly_interest;const s=t.min_installment||5,e=parseInt(this.price/s,10);this.installmentsNumber=Math.min(e,t.max_number)}},updateDiscount(t){!t||t.min_amount&&!(t.min_amount<=this.price)||this.isAmountTotal&&"total"!==t.apply_at||(this.discount=t,!this.discountText&&!1!==this.discountText&&t.label&&(this.discountLabel=`via ${t.label}`))}},watch:{price:{handler(t){this.$emit("fix-price",t)},immediate:!0}},created(){const t="object"==typeof window&&window.storefront;if(this.discountOption)this.updateDiscount(this.discountOption);else if(t){const s=()=>{const s=t.info&&t.info.apply_discount;if(s){const t=s.available_extra_discount;return t&&(this.extraDiscount=t),Object.keys(s).length>0}return!1};s()||t.on("info:apply_discount",s)}if(this.installmentsOption)this.updateInstallments(this.installmentsOption);else if(t){const s=()=>{const s=t.info&&t.info.list_payments;return!!s&&(this.updateInstallments(s.installments_option),this.updateDiscount(s.discount_option),Object.keys(s).length>0)};s()||t.on("info:list_payments",s)}}};s.a=l},178:function(t,s,e){"use strict";e.d(s,"a",(function(){return i})),e.d(s,"b",(function(){return r}));var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"prices",class:{"prices--literal":t.isLiteral,"prices--big":t.isBig}},[t.comparePrice?e("span",{staticClass:"prices__compare"},[t.isLiteral?[e("small",[t._v(" "+t._s(t.i19from)+" ")]),e("s",[t._v(t._s(t.formatMoney(t.comparePrice)))]),e("small",[t._v(" "+t._s(t.i19to)+" ")])]:e("s",[t._v(t._s(t.formatMoney(t.comparePrice)))])],2):t._e(),e("strong",{staticClass:"prices__value",attrs:{"data-price__base":t.price}},[t.hasVariedPrices?e("small",[t._v(" "+t._s(t.i19asOf)+" ")]):t._e(),t._v(" "+t._s(t.formatMoney(t.price))+" "),t.installmentsNumber>1?e("div",{key:"installments",staticClass:"prices__installments"},[t.isLiteral?e("small",[t._v(" "+t._s(t.i19upTo)+" ")]):t._e(),t._v(" "+t._s(t.installmentsNumber)+"x "),t.isLiteral?e("small",[t._v(" "+t._s(t.i19of)+" ")]):t._e(),e("span",[t._v(" "+t._s(t.formatMoney(t.installmentValue))+" ")]),!t.monthlyInterest&&t.isLiteral?e("small",[t._v(" "+t._s(t.i19interestFree)+" ")]):t._e()]):t._e()]),e("transition-group",{attrs:{"enter-active-class":"animated slideInDown"}},["number"==typeof t.priceWithDiscount&&t.priceWithDiscount<t.price?e("div",{key:"discount",staticClass:"prices__discount"},["string"==typeof t.discountLabel&&t.discountLabel?[e("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")]),e("small",{staticClass:"prices__discount-label"},[t._v(" "+t._s(t.discountLabel)+" ")])]:[e("small",[t._v(" "+t._s(t.i19asOf)+" ")]),e("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")])]],2):t._e()])],1)},r=[]},299:function(t,s,e){var i=e(365);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(176).default)("ac1d3ad2",i,!0,{})},300:function(t,s,e){var i=e(367);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(176).default)("0e61f4e5",i,!0,{})},301:function(t,s,e){var i=e(369);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(176).default)("49df9466",i,!0,{})},364:function(t,s,e){"use strict";e(299)},365:function(t,s,e){(s=e(175)(!0)).push([t.i,".account__greetings i,.account__greetings svg{color:var(--success);margin-right:var(--spacer-1)}.account__logout{color:var(--text-muted);margin:var(--spacer-3) 0}.account__logout a{margin:0 var(--spacer-2);color:var(--danger)}.account__nav{margin-top:var(--spacer-5)}.account__content{position:relative;padding-top:var(--spacer-5)}","",{version:3,sources:["TheAccount.scss"],names:[],mappings:"AAAA,8CAA8C,oBAAoB,CAAC,4BAA4B,CAAC,iBAAiB,uBAAuB,CAAC,wBAAwB,CAAC,mBAAmB,wBAAwB,CAAC,mBAAmB,CAAC,cAAc,0BAA0B,CAAC,kBAAkB,iBAAiB,CAAC,2BAA2B",file:"TheAccount.scss",sourcesContent:[".account__greetings i,.account__greetings svg{color:var(--success);margin-right:var(--spacer-1)}.account__logout{color:var(--text-muted);margin:var(--spacer-3) 0}.account__logout a{margin:0 var(--spacer-2);color:var(--danger)}.account__nav{margin-top:var(--spacer-5)}.account__content{position:relative;padding-top:var(--spacer-5)}"]}]),t.exports=s},366:function(t,s,e){"use strict";e(300)},367:function(t,s,e){(s=e(175)(!0)).push([t.i,".account-points__entry small{text-transform:lowercase}.account-points__entry-title{display:flex;width:100%;justify-content:space-between}","",{version:3,sources:["AccountPoints.scss"],names:[],mappings:"AAAA,6BAA6B,wBAAwB,CAAC,6BAA6B,YAAY,CAAC,UAAU,CAAC,6BAA6B",file:"AccountPoints.scss",sourcesContent:[".account-points__entry small{text-transform:lowercase}.account-points__entry-title{display:flex;width:100%;justify-content:space-between}"]}]),t.exports=s},368:function(t,s,e){"use strict";e(301)},369:function(t,s,e){(s=e(175)(!0)).push([t.i,".orders-list{max-width:700px;margin:0 auto}@media (min-width:768px){.orders-list__item{display:flex;justify-content:space-between}.orders-list__item>div{flex:1.4 1 0}.orders-list__item>span{flex:1.4 1 0;text-align:right}}.orders-list__item:hover .orders-list__number{text-decoration:underline}.orders-list__number{padding:0 1rem;border-left:.5rem solid var(--primary-lightest);color:var(--primary)}.orders-list__number--open{border-left-color:var(--info)}.orders-list__number--closed{border-left-color:var(--success)}.orders-list__number--cancelled{border-left-color:var(--danger)}.orders-list__financial-status,.orders-list__fulfillment-status,.orders-list__status{font-weight:var(--font-bold);color:var(--info)}@media (max-width:767.98px){.orders-list__financial-status,.orders-list__fulfillment-status,.orders-list__status{float:right}}.orders-list__status--closed{color:var(--success)}.orders-list__status--cancelled{color:var(--danger)}.orders-list__financial-status--pending{color:var(--warning)}.orders-list__financial-status--in_dispute,.orders-list__financial-status--unauthorized,.orders-list__financial-status--voided{color:var(--danger)}.orders-list__financial-status--paid,.orders-list__fulfillment-status--delivered{color:var(--success)}","",{version:3,sources:["EcOrdersList.scss"],names:[],mappings:"AAAA,aAAa,eAAe,CAAC,aAAa,CAAC,yBAAyB,mBAAmB,YAAY,CAAC,6BAA6B,CAAC,uBAAuB,YAAY,CAAC,wBAAwB,YAAY,CAAC,gBAAgB,CAAC,CAAC,8CAA8C,yBAAyB,CAAC,qBAAqB,cAAc,CAAC,+CAA+C,CAAC,oBAAoB,CAAC,2BAA2B,6BAA6B,CAAC,6BAA6B,gCAAgC,CAAC,gCAAgC,+BAA+B,CAAC,qFAAqF,4BAA4B,CAAC,iBAAiB,CAAC,4BAA4B,qFAAqF,WAAW,CAAC,CAAC,6BAA6B,oBAAoB,CAAC,gCAAgC,mBAAmB,CAAC,wCAAwC,oBAAoB,CAAC,+HAA+H,mBAAmB,CAAC,iFAAiF,oBAAoB",file:"EcOrdersList.scss",sourcesContent:[".orders-list{max-width:700px;margin:0 auto}@media (min-width:768px){.orders-list__item{display:flex;justify-content:space-between}.orders-list__item>div{flex:1.4 1 0}.orders-list__item>span{flex:1.4 1 0;text-align:right}}.orders-list__item:hover .orders-list__number{text-decoration:underline}.orders-list__number{padding:0 1rem;border-left:.5rem solid var(--primary-lightest);color:var(--primary)}.orders-list__number--open{border-left-color:var(--info)}.orders-list__number--closed{border-left-color:var(--success)}.orders-list__number--cancelled{border-left-color:var(--danger)}.orders-list__financial-status,.orders-list__fulfillment-status,.orders-list__status{font-weight:var(--font-bold);color:var(--info)}@media (max-width:767.98px){.orders-list__financial-status,.orders-list__fulfillment-status,.orders-list__status{float:right}}.orders-list__status--closed{color:var(--success)}.orders-list__status--cancelled{color:var(--danger)}.orders-list__financial-status--pending{color:var(--warning)}.orders-list__financial-status--in_dispute,.orders-list__financial-status--unauthorized,.orders-list__financial-status--voided{color:var(--danger)}.orders-list__financial-status--paid,.orders-list__fulfillment-status--delivered{color:var(--success)}"]}]),t.exports=s},380:function(t,s,e){"use strict";e.r(s);var i=e(53),r=e(112),a=e(28),o=e(43),n=e(90),c={name:"TheAccount",components:{LoginBlock:e(306).a},props:{customer:{type:Object,default:()=>({})},isOrdersList:Boolean,ecomPassport:{type:Object,default:()=>i.a}},computed:{i19addresses:()=>Object(o.a)(a.m),i19hello:()=>Object(o.a)(a.Db),i19isNotYou:()=>Object(o.a)(a.Pb),i19logout:()=>Object(o.a)(a.Wb),i19orders:()=>Object(o.a)(a.Cc),i19registration:()=>Object(o.a)(a.Yc),activeTab:{get(){return this.isOrdersList?1:0},set(t){this.$emit("update:is-orders-list",1===t)}},localCustomer:{get(){return this.customer},set(t){this.$emit("update:customer",t)}},nickname(){return Object(n.a)(this.customer)}},methods:{login(t){t.checkAuthorization()&&(this.localCustomer=t.getCustomer(),this.$emit("login",t))},logout(){this.ecomPassport.checkLogin()&&(this.ecomPassport.logout(),this.$emit("logout"))}}},l=(e(364),e(52)),u=Object(l.a)(c,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"account"},[t.localCustomer._id?e("div",{staticClass:"account__logged"},[e("h2",{staticClass:"account__greetings"},[e("i",{staticClass:"fas fa-user-circle"}),t._v(" "+t._s(t.i19hello+" "+t.nickname)+" ")]),e("div",{staticClass:"account__logout"},[t._v(" "+t._s(t.i19isNotYou+"?")+" "),e("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.logout.apply(null,arguments)}}},[e("i",{staticClass:"fas fa-sign-out-alt"}),t._v(" "+t._s(t.i19logout)+" ")])]),e("ul",{staticClass:"account__nav nav nav-tabs"},t._l([t.i19registration,t.i19orders],(function(s,i){return e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.activeTab===i?"active":null,attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.activeTab=i}}},[t._v(" "+t._s(s)+" ")])])})),0),e("div",{staticClass:"account__content"},[e("transition",{attrs:{"enter-active-class":"animated fadeInLeft slow","leave-active-class":"animated fadeOutLeft"}},[t.isOrdersList?t._e():e("div",[t._t("registration",(function(){return[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-7"},[t._t("account-form")],2),e("div",{staticClass:"col-md-5 mt-3 mt-md-0"},[e("h4",[t._v(t._s(t.i19addresses))]),t._t("account-addresses"),e("div",{staticClass:"my-3"},[t._t("account-points")],2)],2)])]}))],2)]),e("transition",{attrs:{"enter-active-class":"animated fadeInRight slow","leave-active-class":"animated fadeOutRight position-absolute"}},[t.isOrdersList?e("div",[t._t("orders-list")],2):t._e()])],1)]):e("login-block",{staticClass:"account__login",attrs:{"can-accept-guest":!1},on:{login:t.login}})],1)}),[],!1,null,null,null).exports,d=e(303),_=e(302),m=e(46),p={name:"AccountPoints",props:{customer:{type:Object,default:()=>({})}},computed:{i19available:()=>Object(o.a)(a.q),i19loyaltyPoints:()=>Object(o.a)(a.Yb),i19pointsEarned:()=>"Pontos ganhos",i19upTo:()=>Object(o.a)(a.Qd),validPointsEntries(){const t=this.customer.loyalty_points_entries;return t?t.filter((t=>{const s=t.valid_thru;return(!s||new Date(s).getTime()>=Date.now())&&t.active_points>0})):[]}},methods:{formatDate:m.a}},A=(e(366),Object(l.a)(p,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.validPointsEntries.length?e("div",{staticClass:"account-points"},[e("h4",[t._v(t._s(t.i19loyaltyPoints))]),e("ul",{staticClass:"list-group"},t._l(t.validPointsEntries,(function(s){return e("li",{staticClass:"list-group-item account-points__entry"},[e("div",{staticClass:"account-points__entry-title"},[e("h5",{staticClass:"mb-1"},[t._v(" "+t._s(s.name)+" ")]),s.valid_thru?e("small",[t._v(" "+t._s(t.i19upTo)+" "+t._s(t.formatDate(s.valid_thru))+" ")]):t._e()]),t._v(" "+t._s(t.i19available)+": "),e("b",[t._v(t._s(s.active_points.toFixed(1)))]),s.earned_points?e("small",{staticClass:"text-muted"},[t._v(" / "+t._s(s.earned_points.toFixed(1)+" "+t.i19pointsEarned)+" ")]):t._e()])})),0)]):t._e()}),[],!1,null,null,null).exports),f=e(80),v={name:"EcOrdersList",components:{EcOrderInfo:e(270).a},props:{mergeDictionary:{type:Object,default:()=>{}},ecomPassport:{type:Object,default:()=>i.a}},data:()=>({updateInterval:null,orders:[]}),methods:{formatDate:m.a,formatMoney:f.a,i19FinancialStatus:t=>Object(o.a)(a.a)[t],i19FulfillmentStatus:t=>Object(o.a)(a.b)[t],i19OrderStatus:t=>Object(o.a)(a.e)[t]},created(){const t=()=>this.ecomPassport.fetchOrdersList().then((t=>{this.orders=t})).catch(console.error);this.ecomPassport.checkAuthorization()?this.ecomPassport.requestApi("/orders.json").then((({data:t})=>{const{result:s}=t;this.ecomPassport.setCustomer({orders:s}),this.orders=s})).catch(t):t(),this.updateInterval=setInterval(t,5e3)},beforeDestroy(){clearInterval(this.updateInterval)}},h=(e(368),Object(l.a)(v,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"orders-list"},t._l(t.orders,(function(s){return t.orders.length?e("div",{staticClass:"list-group list-group-flush"},[e("a",{staticClass:"orders-list__item list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),function(){return t.$emit("click:order",s)}.apply(null,arguments)}}},[e("div",[e("samp",{staticClass:"orders-list__number",class:"orders-list__number--"+s.status,domProps:{textContent:t._s("#"+s.number)}}),s.amount?e("strong",{staticClass:"orders-list__amount"},[t._v(" "+t._s(t.formatMoney(s.amount.total))+" ")]):t._e()]),e("span",[t._v(t._s(t.formatDate(s.created_at)))]),"cancelled"!==s.status&&s.financial_status?"paid"===s.financial_status.current&&s.fulfillment_status?e("span",{staticClass:"orders-list__fulfillment-status",class:"orders-list__fulfillment-status--"+s.fulfillment_status.current},[t._v(" "+t._s(t.i19FulfillmentStatus(s.fulfillment_status.current))+" ")]):e("span",{staticClass:"orders-list__financial-status",class:"orders-list__financial-status--"+s.financial_status.current},[t._v(" "+t._s(t.i19FinancialStatus(s.financial_status.current))+" ")]):e("span",{staticClass:"orders-list__status",class:"orders-list__status--"+s.status},[t._v(" "+t._s(t.i19OrderStatus(s.status))+" ")])])]):t._e()})),0)}),[],!1,null,null,null).exports),g={name:"account",components:{TheAccount:u,AccountForm:d.a,AccountAddresses:_.a,AccountPoints:A,EcOrdersList:h},data:()=>({ecomPassport:i.a}),computed:{customer:{get(){return this.$store.getters.customer},set(t){this.setCustomer(t);const{ecomPassport:s}=this;s&&s.checkAuthorization()&&(this.triggerLoading(!0),this.saveCustomer({ecomPassport:s}).finally((()=>this.triggerLoading(!1))))}},isOrdersList:{get(){return"orders"===this.$route.params.tab},set(t){this.$router.push({name:"account",params:{tab:t?"orders":null}})}}},methods:{...Object(r.d)(["triggerLoading","setCustomer","resetAccount"]),...Object(r.b)(["fetchCustomer","saveCustomer"]),login(t){this.ecomPassport=t,this.triggerLoading(!0),this.fetchCustomer({ecomPassport:t}).finally((()=>this.triggerLoading(!1)))},viewOrder({_id:t,number:s}){s&&this.$router.push({name:"order",params:{number:s,id:t}})}}},C=Object(l.a)(g,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"account"}},[e("the-account",{attrs:{"ecom-passport":t.ecomPassport,customer:t.customer,"is-orders-list":t.isOrdersList},on:{"update:customer":function(s){t.customer=s},"update:isOrdersList":function(s){t.isOrdersList=s},"update:is-orders-list":function(s){t.isOrdersList=s},login:t.login,logout:t.resetAccount},scopedSlots:t._u([{key:"account-form",fn:function(){return[e("account-form",{attrs:{customer:t.customer},on:{"update:customer":function(s){t.customer=s}}})]},proxy:!0},{key:"account-addresses",fn:function(){return[e("account-addresses",{attrs:{customer:t.customer},on:{"update:customer":function(s){t.customer=s}}})]},proxy:!0},{key:"account-points",fn:function(){return[e("account-points",{attrs:{customer:t.customer},on:{"update:customer":function(s){t.customer=s}}})]},proxy:!0},{key:"orders-list",fn:function(){return[e("ec-orders-list",{attrs:{"ecom-passport":t.ecomPassport},on:{"click:order":t.viewOrder}})]},proxy:!0}])})],1)}),[],!1,null,null,null);s.default=C.exports}}]);